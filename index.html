<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>üí© Your 2025 Year in Shit</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-gradient-1: #1a0a2e;
      --bg-gradient-2: #16213e;
      --bg-gradient-3: #0f3460;
      --accent-gold: #f5a623;
      --accent-warm: #e67e22;
      --accent-brown: #8b4513;
      --text-primary: #fff;
      --text-secondary: rgba(255, 255, 255, 0.7);
      --card-bg: rgba(255, 255, 255, 0.08);
      --card-border: rgba(255, 255, 255, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      overflow: hidden;
    }

    body {
      font-family: 'Outfit', sans-serif;
      background: linear-gradient(135deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 50%, var(--bg-gradient-3) 100%);
      color: var(--text-primary);
      min-height: 100dvh;
      position: relative;
    }

    /* Floating background elements */
    .bg-shapes {
      position: fixed;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
      z-index: 0;
    }

    .bg-shape {
      position: absolute;
      font-size: 3rem;
      opacity: 0.1;
      animation: float 20s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-30px) rotate(15deg); }
    }

    /* Progress bar */
    .progress-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: rgba(255, 255, 255, 0.1);
      z-index: 100;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-gold), var(--accent-warm));
      transition: width 0.3s ease;
    }

    /* Slide indicators */
    .slide-indicators {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 100;
    }

    .indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transition: all 0.3s ease;
    }

    .indicator.active {
      background: var(--accent-gold);
      transform: scale(1.3);
    }

    /* Timer bar under active indicator */
    .timer-bar-container {
      position: fixed;
      bottom: 28px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 3px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
      z-index: 100;
    }

    .timer-bar {
      height: 100%;
      background: var(--accent-gold);
      border-radius: 2px;
      width: 0%;
      transition: width 0.1s linear;
    }

    /* Slideshow container */
    .slideshow {
      position: relative;
      width: 100%;
      height: 100dvh;
      overflow: hidden;
      touch-action: pan-y;
    }

    .slides-wrapper {
      display: flex;
      height: 100%;
      transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .slide {
      min-width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 24px;
      position: relative;
    }

    /* Slide content styles */
    .slide-emoji {
      font-size: 5rem;
      margin-bottom: 1.5rem;
      animation: bounce-in 0.6s ease-out;
    }

    @keyframes bounce-in {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); opacity: 1; }
    }

    .slide-label {
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 3px;
      color: var(--accent-gold);
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .slide-value {
      font-family: 'Fredoka', sans-serif;
      font-size: 4.5rem;
      font-weight: 700;
      margin-bottom: 0.75rem;
      background: linear-gradient(135deg, #fff 0%, var(--accent-gold) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: value-pop 0.4s ease-out 0.3s both;
      text-align: center;
    }

    @keyframes value-pop {
      0% { transform: scale(0.5); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    .slide-unit {
      font-size: 1.5rem;
      color: var(--text-secondary);
      margin-bottom: 1.5rem;
    }

    .slide-description {
      font-size: 1rem;
      color: var(--text-secondary);
      text-align: center;
      max-width: 280px;
      line-height: 1.6;
    }

    /* Special slide styles */
    .slide-intro .slide-emoji {
      font-size: 6rem;
    }

    .slide-intro .slide-value {
      font-size: 2.5rem;
    }

    .slide-outro .slide-value {
      font-size: 2rem;
    }

    /* Comparison card */
    .comparison-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 20px;
      margin-top: 1.5rem;
      width: 100%;
      max-width: 280px;
    }

    .comparison-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px 0;
    }

    .comparison-icon {
      font-size: 1.5rem;
    }

    .comparison-text {
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .comparison-text strong {
      color: var(--accent-gold);
    }

    /* Chart container shared styles */
    .chart-container {
      width: 100%;
      max-width: 280px;
      margin-top: 1.5rem;
    }

    .time-chart {
      display: flex;
      gap: 4px;
      align-items: flex-end;
      height: 80px;
      width: 100%;
    }

    .time-bar {
      flex: 1;
      background: linear-gradient(to top, var(--accent-warm), var(--accent-gold));
      border-radius: 4px 4px 0 0;
      min-width: 0;
      transition: height 0.5s ease;
    }

    .time-labels {
      display: flex;
      gap: 4px;
      width: 100%;
      margin-top: 8px;
    }

    .time-label {
      flex: 1;
      font-size: 0.625rem;
      color: var(--text-secondary);
      text-align: center;
    }

    /* Day of week chart */
    .day-container {
      max-width: 280px;
    }

    /* Hourly chart */
    .hourly-container {
      max-width: 320px;
    }

    .hourly-chart {
      gap: 2px;
    }

    .hourly-labels {
      gap: 2px;
    }

    .hourly-labels .time-label {
      font-size: 0.5rem;
    }

    /* Achievement badge */
    .achievement {
      background: linear-gradient(135deg, #f5a623 0%, #e67e22 100%);
      border-radius: 20px;
      padding: 12px 24px;
      margin-top: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      animation: shine 2s ease-in-out infinite;
    }

    @keyframes shine {
      0%, 100% { box-shadow: 0 0 20px rgba(245, 166, 35, 0.3); }
      50% { box-shadow: 0 0 40px rgba(245, 166, 35, 0.6); }
    }

    .achievement-icon {
      font-size: 1.5rem;
    }

    .achievement-text {
      font-size: 0.875rem;
      font-weight: 600;
    }

    /* Navigation arrows */
    .nav-arrow {
      position: fixed;
      top: 90%;
      transform: translateY(-50%);
      width: 44px;
      height: 44px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 1.25rem;
      cursor: pointer;
      z-index: 100;
      opacity: 0.6;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav-arrow:hover {
      opacity: 1;
      background: rgba(255, 255, 255, 0.2);
    }

    .nav-arrow:disabled {
      opacity: 0.2;
      cursor: not-allowed;
    }

    .nav-prev {
      left: 12px;
    }

    .nav-next {
      right: 12px;
    }

    /* Share button */
    .share-btn {
      background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-warm) 100%);
      border: none;
      border-radius: 30px;
      padding: 16px 40px;
      font-family: 'Outfit', sans-serif;
      font-size: 1rem;
      font-weight: 600;
      color: white;
      cursor: pointer;
      margin-top: 2rem;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .share-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 30px rgba(245, 166, 35, 0.4);
    }



    @keyframes fade-hint {
      0%, 70% { opacity: 1; }
      100% { opacity: 0; }
    }

    /* Fun stat variations */
    .stat-highlight {
      color: var(--accent-gold);
      font-weight: 600;
    }

    .rank-badge {
      font-size: 1.25rem;
      background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
    }

    /* Summary card */
    .summary-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 20px;
      padding: 20px;
      margin-top: 1rem;
      width: 100%;
      max-width: 300px;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid var(--card-border);
    }

    .summary-row:last-child {
      border-bottom: none;
    }

    .summary-label {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .summary-label-icon {
      font-size: 1.25rem;
    }

    .summary-value {
      font-family: 'Fredoka', sans-serif;
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--accent-gold);
    }

    .slide-outro .slide-value {
      font-size: 1.75rem;
    }

    .slide-outro .slide-emoji {
      font-size: 4rem;
    }
  </style>
</head>
<body>
  <!-- Background shapes -->
  <div class="bg-shapes" id="bgShapes"></div>

  <!-- Progress bar -->
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <!-- Navigation arrows -->
  <button class="nav-arrow nav-prev" id="prevBtn" aria-label="Previous slide">‚Äπ</button>
  <button class="nav-arrow nav-next" id="nextBtn" aria-label="Next slide">‚Ä∫</button>

  <!-- Slideshow -->
  <div class="slideshow" id="slideshow">
    <div class="slides-wrapper" id="slidesWrapper">
      <!-- Slides will be generated by JavaScript -->
    </div>
  </div>

  <!-- Slide indicators -->
  <div class="slide-indicators" id="indicators"></div>

  <!-- Timer bar -->
  <div class="timer-bar-container">
    <div class="timer-bar" id="timerBar"></div>
  </div>

  <script>
    // Generate random stats based on day-by-day simulation
    function generateStats() {
      const daysInYear = 365;
      
      // Weighted distribution for shits per day (0-6)
      // 1 is most likely, with decreasing probability for higher/lower values
      const weights = [11, 75, 7, 5, 1.3, 0.5, 0.2]; // weights for 0, 1, 2, 3, 4, 5, 6
      const totalWeight = weights.reduce((a, b) => a + b, 0);
      
      function getRandomShitsForDay() {
        const rand = Math.random() * totalWeight;
        let cumulative = 0;
        for (let i = 0; i < weights.length; i++) {
          cumulative += weights[i];
          if (rand < cumulative) return i;
        }
        return 1; // fallback
      }
      
      // Day of week names (starting from day 1 = Monday)
      const dayNames = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
      
      // Weighted distribution for hour of day (0-23)
      // Peak around 8-10am and 6-8pm, low at night
      const hourWeights = [
        1, 1, 1, 1, 1, 2,    // 0-5 (night/early morning - very low)
        4, 8, 15, 12, 8, 6,  // 6-11 (morning peak)
        5, 6, 7, 6, 5, 8,    // 12-17 (afternoon)
        12, 10, 6, 4, 2, 1   // 18-23 (evening peak, then decline)
      ];
      const totalHourWeight = hourWeights.reduce((a, b) => a + b, 0);
      
      function getRandomHour() {
        const rand = Math.random() * totalHourWeight;
        let cumulative = 0;
        for (let i = 0; i < hourWeights.length; i++) {
          cumulative += hourWeights[i];
          if (rand < cumulative) return i;
        }
        return 8; // fallback
      }
      
      // Simulate each day
      const dailyShits = [];
      const dayOfWeekTotals = [0, 0, 0, 0, 0, 0, 0]; // Mon-Sun
      const hourlyTotals = new Array(24).fill(0); // 0-23 hours
      let workShits = 0; // Shits during work hours (9am-6pm Mon-Fri)
      
      for (let day = 1; day <= daysInYear; day++) {
        const shitsToday = getRandomShitsForDay();
        dailyShits.push(shitsToday);
        
        // Day of week: day 1 is Monday (index 0), day 7 is Sunday (index 6), etc.
        const dayOfWeekIndex = (day - 1) % 7;
        const isWeekday = dayOfWeekIndex < 5; // Mon-Fri
        dayOfWeekTotals[dayOfWeekIndex] += shitsToday;
        
        // Generate a time for each individual shit
        for (let i = 0; i < shitsToday; i++) {
          const hour = getRandomHour();
          hourlyTotals[hour]++;
          
          // Check if this is a work shit (9am-6pm on weekdays)
          if (isWeekday && hour >= 9 && hour < 18) {
            workShits++;
          }
        }
      }
      
      // Calculate stats from daily data
      const totalShits = dailyShits.reduce((a, b) => a + b, 0);
      const avgPerDay = (totalShits / daysInYear).toFixed(2);
      const mostInOneDay = Math.max(...dailyShits);
      
      // Calculate longest streak (consecutive days with at least 1 shit)
      let longestStreak = 0;
      let currentStreak = 0;
      for (const shits of dailyShits) {
        if (shits >= 1) {
          currentStreak++;
          longestStreak = Math.max(longestStreak, currentStreak);
        } else {
          currentStreak = 0;
        }
      }
      
      // Find best day of week
      const maxDayOfWeekTotal = Math.max(...dayOfWeekTotals);
      const bestDayOfWeekIndex = dayOfWeekTotals.indexOf(maxDayOfWeekTotal);
      const bestDayOfWeek = dayNames[bestDayOfWeekIndex];
      
      // Normalize day of week totals to percentages for chart
      const dayOfWeekTotal = dayOfWeekTotals.reduce((a, b) => a + b, 0);
      const dayOfWeekPercentages = dayOfWeekTotals.map(t => Math.round((t / dayOfWeekTotal) * 100));
      
      // Average duration per session (random, 2-20 minutes)
      const avgDuration = Math.floor(Math.random() * 18) + 2;
      const totalTimeHours = Math.floor((totalShits * avgDuration) / 60);
      
      // Paid shitting time (work hours: 9am-6pm Mon-Fri)
      const paidShitMinutes = workShits * avgDuration;
      const paidShitHours = Math.floor(paidShitMinutes / 60);
      const paidShitRemainingMins = paidShitMinutes % 60;
      
      // Find peak hour
      const maxHourlyTotal = Math.max(...hourlyTotals);
      const peakHour = hourlyTotals.indexOf(maxHourlyTotal);
      
      // Format peak hour for display (e.g., "9 AM", "2 PM")
      function formatHour(hour) {
        if (hour === 0) return '12 AM';
        if (hour === 12) return '12 PM';
        if (hour < 12) return `${hour} AM`;
        return `${hour - 12} PM`;
      }
      const peakHourFormatted = formatHour(peakHour);
      
      // Normalize hourly totals to percentages for chart
      const hourlyTotal = hourlyTotals.reduce((a, b) => a + b, 0);
      const hourlyPercentages = hourlyTotals.map(t => Math.round((t / hourlyTotal) * 100));
      
      // Fun comparisons - generate all, then pick 2 randomly
      const allComparisons = [
        { text: `reading ${Math.floor(totalTimeHours / 3)} books`, icon: 'üìö' },
        { text: `watching ${Math.floor(totalTimeHours / 2)} movies`, icon: 'üé¨' },
        { text: `${Math.floor(totalTimeHours / 6)} flights from NY to LA`, icon: '‚úàÔ∏è' },
        { text: `binging ${Math.floor(totalTimeHours / 10)} TV seasons`, icon: 'üì∫' },
        { text: `${Math.floor(totalTimeHours * 4)} yoga sessions`, icon: 'üßò' },
        { text: `listening to ${Math.floor(totalTimeHours * 20)} songs`, icon: 'üéµ' },
      ].filter(c => !c.text.includes(' 0 ') && !c.text.startsWith('0 ')); // Filter out zero values
      
      // Shuffle and pick 2
      const shuffled = allComparisons.sort(() => Math.random() - 0.5);
      const selectedComparisons = shuffled.slice(0, 2);
      
      // Calculate percentile based on actual distribution
      // Expected value per day: E[X] = sum(i * weight[i]) / totalWeight
      const expectedPerDay = weights.reduce((sum, w, i) => sum + i * w, 0) / totalWeight;
      // E[X¬≤] for variance calculation
      const expectedSquaredPerDay = weights.reduce((sum, w, i) => sum + i * i * w, 0) / totalWeight;
      // Variance per day: Var(X) = E[X¬≤] - E[X]¬≤
      const variancePerDay = expectedSquaredPerDay - expectedPerDay * expectedPerDay;
      // For 365 days (by CLT, sum is approximately normal)
      const expectedTotal = daysInYear * expectedPerDay;
      const stdDevTotal = Math.sqrt(daysInYear * variancePerDay);
      // Z-score: how many standard deviations from the mean
      const zScore = (totalShits - expectedTotal) / stdDevTotal;
      // Convert to percentile using normal CDF approximation
      // Using error function approximation for normal CDF
      function normalCDF(z) {
        const a1 =  0.254829592;
        const a2 = -0.284496736;
        const a3 =  1.421413741;
        const a4 = -1.453152027;
        const a5 =  1.061405429;
        const p  =  0.3275911;
        const sign = z < 0 ? -1 : 1;
        z = Math.abs(z) / Math.sqrt(2);
        const t = 1.0 / (1.0 + p * z);
        const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-z * z);
        return 0.5 * (1.0 + sign * y);
      }
      const percentile = Math.round(normalCDF(zScore) * 100);
      
      // Achievement based on stats
      let achievement;
      if (percentile >= 90) {
        achievement = { icon: 'üèÜ', text: 'Throne Champion' };
      } else if (longestStreak > 100) {
        achievement = { icon: 'üéØ', text: 'Consistency King' };
      } else if (avgDuration < 5) {
        achievement = { icon: '‚ö°', text: 'Speed Demon' };
      } else if (avgDuration > 15) {
        achievement = { icon: 'üìö', text: 'Scholarly Sitter' };
      } else {
        achievement = { icon: 'üöÄ', text: 'Rocket Launcher' };
      }
      
      return {
        totalShits,
        avgPerDay,
        longestStreak,
        mostInOneDay,
        avgDuration,
        totalHours: totalTimeHours,
        workShits,
        paidShitHours,
        paidShitRemainingMins,
        peakHour,
        peakHourFormatted,
        hourlyTotals,
        hourlyPercentages,
        comparisons: selectedComparisons,
        achievement,
        percentile,
        bestDayOfWeek,
        dayOfWeekTotals,
        dayOfWeekPercentages,
      };
    }

    // Create slides based on stats
    function createSlides(stats) {
      return [
        // Intro slide
        {
          type: 'intro',
          emoji: 'üí©',
          label: 'Your 2025',
          value: 'Year in Shit',
          description: "Let's look back at your bathroom adventures this year...",
        },
        // Total shits
        {
          emoji: 'üöΩ',
          label: 'Total Shits',
          value: stats.totalShits.toLocaleString(),
          unit: 'visits',
          description: 'You really kept yourself busy this year!',
        },
        // Average per day
        {
          emoji: 'üìä',
          label: 'Daily Average',
          value: stats.avgPerDay,
          unit: 'shits per day',
          description: "That's your personal rhythm!",
        },
        // Longest streak
        {
          emoji: 'üî•',
          label: 'Longest Streak',
          value: stats.longestStreak,
          unit: 'consecutive days',
          description: 'Without missing a single day. Impressive consistency!',
        },
        // Most in one day
        {
          emoji: 'üí•',
          label: 'Record Day',
          value: stats.mostInOneDay,
          unit: 'shits in one day',
          description: 'We all have those days. No judgment here.',
        },
        // Average duration
        {
          emoji: '‚è±Ô∏è',
          label: 'Avg. Session',
          value: stats.avgDuration,
          unit: 'minutes',
          description: 'Quality time with your thoughts.',
        },
        // Peak hour
        {
          emoji: stats.peakHour < 6 ? 'üåô' : stats.peakHour < 12 ? 'üåÖ' : stats.peakHour < 18 ? '‚òÄÔ∏è' : 'üåÜ',
          label: 'Peak Hour',
          value: stats.peakHourFormatted,
          unit: 'is your prime time',
          description: `You dropped ${stats.hourlyTotals[stats.peakHour]} bombs at this hour this year.`,
          showHourlyChart: true,
          hourlyPercentages: stats.hourlyPercentages,
        },
        // Best day of week
        {
          emoji: 'üìÖ',
          label: 'Best Day',
          value: stats.bestDayOfWeek,
          unit: 'is your day',
          description: `You dropped ${stats.dayOfWeekTotals[['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].indexOf(stats.bestDayOfWeek)]} bombs on ${stats.bestDayOfWeek}s this year!`,
          showDayChart: true,
          dayOfWeekPercentages: stats.dayOfWeekPercentages,
        },
        // Total time
        {
          emoji: '‚åõ',
          label: 'Time Invested',
          value: stats.totalHours,
          unit: 'hours total',
          description: `That's like ${stats.comparisons[0]?.text || 'a lot'} or ${stats.comparisons[1]?.text || 'even more'}!`,
        },
        // Paid to shit
        {
          emoji: 'üí∞',
          label: 'Paid to Shit',
          value: stats.paidShitHours > 0 ? `${stats.paidShitHours}h ${stats.paidShitRemainingMins}m` : `${stats.paidShitRemainingMins} min`,
          unit: 'during work hours',
          description: `Boss makes a dollar, you make a dime...`,
        },
        // Percentile
        {
          emoji: 'üèÖ',
          label: 'Your Rank',
          value: `Top ${100 - stats.percentile}%`,
          unit: 'of all shitters',
          description: 'Among our community of bathroom enthusiasts.',
        },
        // Achievement
        {
          emoji: stats.achievement.icon,
          label: '2025 Achievement',
          value: stats.achievement.text,
          unit: 'unlocked!',
          description: 'Wear this badge with pride.',
          showAchievement: true,
          achievement: stats.achievement,
        },
        // Summary
        {
          type: 'outro',
          emoji: 'üìã',
          label: 'Your 2025 Summary',
          value: 'The Highlights',
          description: '',
          showSummary: true,
          stats: stats,
          showButtons: true,
        },
      ];
    }

    // Render slides
    function renderSlides(slides) {
      const wrapper = document.getElementById('slidesWrapper');
      const indicators = document.getElementById('indicators');
      
      wrapper.innerHTML = slides.map((slide, index) => `
        <div class="slide ${slide.type ? `slide-${slide.type}` : ''}" data-index="${index}">
          <div class="slide-emoji">${slide.emoji}</div>
          <div class="slide-label">${slide.label}</div>
          <div class="slide-value">${slide.value}</div>
          ${slide.unit ? `<div class="slide-unit">${slide.unit}</div>` : ''}
          <div class="slide-description">${slide.description}</div>
          ${slide.showHourlyChart ? `
            <div class="chart-container hourly-container">
              <div class="time-chart hourly-chart">
                ${slide.hourlyPercentages.map(val => `<div class="time-bar" style="height: ${val * 4}%"></div>`).join('')}
              </div>
              <div class="time-labels hourly-labels">
                ${Array.from({length: 24}, (_, i) => `<span class="time-label">${i % 6 === 0 ? (i === 0 ? '12a' : i === 6 ? '6a' : i === 12 ? '12p' : '6p') : ''}</span>`).join('')}
              </div>
            </div>
          ` : ''}
          ${slide.showDayChart ? `
            <div class="chart-container day-container">
              <div class="time-chart">
                ${slide.dayOfWeekPercentages.map(val => `<div class="time-bar" style="height: ${val * 5}%"></div>`).join('')}
              </div>
              <div class="time-labels">
                <span class="time-label">M</span>
                <span class="time-label">T</span>
                <span class="time-label">W</span>
                <span class="time-label">T</span>
                <span class="time-label">F</span>
                <span class="time-label">S</span>
                <span class="time-label">S</span>
              </div>
            </div>
          ` : ''}
          ${slide.showAchievement ? `
            <div class="achievement">
              <span class="achievement-icon">${slide.achievement.icon}</span>
              <span class="achievement-text">${slide.achievement.text}</span>
            </div>
          ` : ''}
          ${slide.showSummary ? `
            <div class="summary-card">
              <div class="summary-row">
                <span class="summary-label"><span class="summary-label-icon">üöΩ</span> Total Shits</span>
                <span class="summary-value">${slide.stats.totalShits.toLocaleString()}</span>
              </div>
              <div class="summary-row">
                <span class="summary-label"><span class="summary-label-icon">üìä</span> Daily Avg</span>
                <span class="summary-value">${slide.stats.avgPerDay}</span>
              </div>
              <div class="summary-row">
                <span class="summary-label"><span class="summary-label-icon">üî•</span> Best Streak</span>
                <span class="summary-value">${slide.stats.longestStreak} days</span>
              </div>
              <div class="summary-row">
                <span class="summary-label"><span class="summary-label-icon">‚è±Ô∏è</span> Avg Session</span>
                <span class="summary-value">${slide.stats.avgDuration} min</span>
              </div>
              <div class="summary-row">
                <span class="summary-label"><span class="summary-label-icon">‚åõ</span> Total Time</span>
                <span class="summary-value">${slide.stats.totalHours} hrs</span>
              </div>
            </div>
          ` : ''}
          ${slide.showButtons ? `
            <button class="share-btn" onclick="shareResults()">Share Your Stats üí©</button>
          ` : ''}
        </div>
      `).join('');
      
      indicators.innerHTML = slides.map((_, index) => `
        <div class="indicator ${index === 0 ? 'active' : ''}" data-index="${index}"></div>
      `).join('');
    }

    // Create background shapes
    function createBackgroundShapes() {
      const container = document.getElementById('bgShapes');
      const emojis = ['üí©', 'üöΩ', 'üì±', '‚≠ê', '‚ú®'];
      
      for (let i = 0; i < 15; i++) {
        const shape = document.createElement('div');
        shape.className = 'bg-shape';
        shape.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        shape.style.left = `${Math.random() * 100}%`;
        shape.style.top = `${Math.random() * 100}%`;
        shape.style.animationDelay = `${Math.random() * 20}s`;
        shape.style.animationDuration = `${15 + Math.random() * 10}s`;
        container.appendChild(shape);
      }
    }

    // Slideshow state
    let currentSlide = 0;
    let totalSlides = 0;
    let autoAdvanceTimer = null;
    let timerInterval = null;
    let timerProgress = 0;
    const AUTO_ADVANCE_TIME = 5000;

    // Navigate to slide
    function goToSlide(index) {
      if (index < 0 || index >= totalSlides) return;
      
      currentSlide = index;
      const wrapper = document.getElementById('slidesWrapper');
      wrapper.style.transform = `translateX(-${index * 100}%)`;
      
      // Update progress bar
      const progressBar = document.getElementById('progressBar');
      progressBar.style.width = `${((index + 1) / totalSlides) * 100}%`;
      
      // Update indicators
      document.querySelectorAll('.indicator').forEach((ind, i) => {
        ind.classList.toggle('active', i === index);
      });
      
      // Update nav buttons
      document.getElementById('prevBtn').disabled = index === 0;
      document.getElementById('nextBtn').disabled = index === totalSlides - 1;
      
      // Reset and start auto-advance timer
      resetAutoAdvance();
      
      // Don't auto-advance on last slide
      if (index < totalSlides - 1) {
        startAutoAdvance();
      }
    }

    function nextSlide() {
      if (currentSlide < totalSlides - 1) {
        goToSlide(currentSlide + 1);
      }
    }

    function prevSlide() {
      if (currentSlide > 0) {
        goToSlide(currentSlide - 1);
      }
    }

    function resetAutoAdvance() {
      if (autoAdvanceTimer) {
        clearTimeout(autoAdvanceTimer);
        autoAdvanceTimer = null;
      }
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
      timerProgress = 0;
      document.getElementById('timerBar').style.width = '0%';
    }

    function startAutoAdvance() {
      timerProgress = 0;
      const timerBar = document.getElementById('timerBar');
      
      timerInterval = setInterval(() => {
        timerProgress += 100;
        const percent = (timerProgress / AUTO_ADVANCE_TIME) * 100;
        timerBar.style.width = `${percent}%`;
      }, 100);
      
      autoAdvanceTimer = setTimeout(() => {
        nextSlide();
      }, AUTO_ADVANCE_TIME);
    }

    // Touch/swipe handling
    let touchStartX = 0;
    let touchEndX = 0;

    function handleTouchStart(e) {
      touchStartX = e.changedTouches[0].screenX;
    }

    function handleTouchEnd(e) {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    }

    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = touchStartX - touchEndX;
      
      if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0) {
          nextSlide();
        } else {
          prevSlide();
        }
      }
    }

    // Share functionality
    function shareResults() {
      const shareText = `üí© My 2025 Year in Shit is here! Check out your stats too!`;
      
      if (navigator.share) {
        navigator.share({
          title: 'Year in Shit 2025',
          text: shareText,
          url: window.location.href,
        }).catch(() => {});
      } else {
        // Fallback: copy to clipboard
        navigator.clipboard.writeText(shareText + ' ' + window.location.href)
          .then(() => alert('Link copied to clipboard!'))
          .catch(() => alert('Share this page with your friends!'));
      }
    }

    // Initialize
    function init() {
      createBackgroundShapes();
      
      const stats = generateStats();
      const slides = createSlides(stats);
      totalSlides = slides.length;
      
      renderSlides(slides);
      
      // Event listeners
      document.getElementById('prevBtn').addEventListener('click', prevSlide);
      document.getElementById('nextBtn').addEventListener('click', nextSlide);
      
      const slideshow = document.getElementById('slideshow');
      slideshow.addEventListener('touchstart', handleTouchStart, { passive: true });
      slideshow.addEventListener('touchend', handleTouchEnd, { passive: true });
      
      // Keyboard navigation
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') prevSlide();
        if (e.key === 'ArrowRight') nextSlide();
      });
      
      // Click on indicators
      document.getElementById('indicators').addEventListener('click', (e) => {
        if (e.target.classList.contains('indicator')) {
          goToSlide(parseInt(e.target.dataset.index));
        }
      });
      
      // Start slideshow
      goToSlide(0);
    }

    // Start when DOM is ready
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>

